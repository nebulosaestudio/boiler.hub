<!DOCTYPE HTML>
<!--
    basic game template
-->
<html>
    <head>
        <title>. LOADER .</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
       <!-- crossorigin="anonymous" //inside <script> -->
        <script src="./Element.js" ></script>


        
        <style>
            html {
                /*background-color: #faf;*/
                margin:0;
                padding:0;
                height:100%;
            }

            body{
                margin:0;
                padding:0;
                background:rgba(14,12,18,1);
            }

            #canvas{
                margin:0;
                padding:0;
                width:100%;
                height:100%;
            }
        </style>
    </head>

    <body >

        <!--
         <canvas id="canvas" width="1500" height="1500"></canvas>
         <canvas id="canvasb"> </canvas>
        -->

    </body>

        <script>

    var data = `        { "elements" : 
    {"back" :
        {  
          "tag"     : "div" , 
          "id"      : "id" , 
          "class"   : "class" , 
          "style"   : "width:100%;height:100%" , 
          "width"   : "w" , 
          "height"  : "h" 
        } 
    ,
     "logo" : 
        { "tag" : "img" ,
          "id" : "logo" , 
          "class" : "class" , 
          "style" : "style" , 
          "width" : 200 ,
          "height" : 100 ,
          "url" : "logo.png" 
        }
     ,
     "button" :
         { "tag" : "h1" ,
           "id" : "but" , 
           "class" : "class" , 
           "style" : "color:#fafafa" , 
           "width" : 200 , 
           "height" : 100 , 
           "txt" : "start" , 
           "event" : "onpress(next)" 
        }
    }  
}`;

    var obj = JSON.parse(data);

    console.log(obj);

    var elements = obj.elements;
    console.log(elements.back)

    
//  constructor(tag ,  args = { id : 'id' , class : 'class' , style : ''} , vars = { 'width' : '' , 'height' : '' , 'pos' : '' , 'vel' : ' '} ) {

    /* NICE! late : do a loop */
    // BACK
    var element = elements.back;
    var args = { id : element.id , class : element.class , style : element.style };
    var vars = { width : element.width , height : element.height };
    var backE = new Element(element.tag,args,vars);

    console.log(backE);

    // LOGO
    var element = elements.logo;
    var args = { id : element.id , class : element.class , style : element.style };
    var vars = { width : element.width , height : element.height };
    var logoE = new Imagen('logo.png',args);

    //BUTTON
    var element = elements.button;

    var args = { id : element.id , class : element.class , style : element.style };
    var vars = {};
    var buttonE = new Text('EMPEZAR',args);


    buttonE.addEvent('onpress(next)');

/* en vez de add to dom */
/*
    crete stage ; addToStage([backE,logoE,butonE])
*/
    backE.append2DOM();

    logoE.append2DOM();

    buttonE.append2DOM();

    var fun = function(){

        //onupdate
        this.x += 2;
        console.log(this);
        console.log(this.x , "h");
    }

    logoE.defineComportamientoUpdate(fun);
    // backE.defineComportamientoUpdate(function(){console.log(this.x+=1)})
  
    logoE.update(); 

        </script>
    
</html>
